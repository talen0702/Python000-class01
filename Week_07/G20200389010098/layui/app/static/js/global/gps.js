var getGpsInfo={error:0,mqqSetError:function(status){if(status){if(!status.enabled){getGpsInfo.error=-1}else if(!status.authroized){getGpsInfo.error=-2}}},h5SetError:function(error){if(error.code){switch(error.code){case error.PERMISSION_DENIED:getGpsInfo.error=-2;break;case error.POSITION_UNAVAILABLE:getGpsInfo.error=-3;break;case error.TIMEOUT:getGpsInfo.error=-4;break;case error.UNKNOWN_ERROR:getGpsInfo.error=-5;break}}},getError:function(){return getGpsInfo.error},getLocation:function(callback){if(typeof callback!='function'){callback=function(latitude,longitude){}}var gps=navigator.geolocation;if(!gps){getGpsInfo.mqqSetError(status);callback(0,0);return false}gps.getCurrentPosition(function(position){if(position){callback(position.coords.latitude,position.coords.longitude)}else{callback(0,0)}},function(error){getGpsInfo.h5SetError(error);callback(0,0)},{timeout:100000,maximumAge:10000})},fail:function(msg){msg=msg||'<i class="locInco commF">\u83b7\u53d6\u4f4d\u7f6e\u5931\u8d25';$('#LBSInfoLatitude').val('');$('#LBSInfoLongitude').val('');$('#LBSInfoProvince').val('');$('#LBSInfoCity').val('');$('#LBSInfoStreet').val('');$('#LBSInfoDistrict').val('');$('#cityCode').val('');$('.locationCon').html(msg)},init:function(callback){var callback=callback||null;getGpsInfo.getLocation(function(latitude,longitude){$.post(getGpsInfoUrl,{'__hash__':hash,'latitude':latitude,'longitude':longitude},function(result){if(result.status==1){var LBSInfo=result.data.LBSInfo;$('.locationCon').addClass('curOn').html('<i class="locInco commF">'+LBSInfo.city+(LBSInfo.district?(' '+LBSInfo.district):'')+(LBSInfo.street?(' '+LBSInfo.street):''));if(result.data.cityCode)$('#cityCode').val(result.data.cityCode);if(LBSInfo){$('#LBSInfoLatitude').val(LBSInfo.latitude);$('#LBSInfoLongitude').val(LBSInfo.longitude);$('#LBSInfoProvince').val(LBSInfo.province);$('#LBSInfoCity').val(LBSInfo.city);$('#LBSInfoDistrict').val(LBSInfo.district);$('#LBSInfoStreet').val(LBSInfo.street)}}else{getGpsInfo.fail()}if(callback){callback()}},'json')})}};